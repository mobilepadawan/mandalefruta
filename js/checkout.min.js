import{crearFilaProducto,mostrarMensaje}from"./utils.min.js";import{ShoppingCart}from"./class.shoppingcart.min.js";const btnComprar=document.querySelector("button#btnBuy"),btnVolver=document.querySelector("button#btnReturn"),totalCarrito=document.querySelector("td#totalPrice"),tableBody=document.querySelector("tbody#tableBody");function cargarCarritoCompras(){if(ShoppingCart.restoreShoppingCart(),ShoppingCart.cartList.length>0){let t="";ShoppingCart.cartList.forEach((r=>t+=crearFilaProducto(r))),tableBody.innerHTML=t,totalCarrito.textContent=ShoppingCart.calculateTotalAmount(),activarEventosClickQuitarProd(),btnComprar.removeAttribute("disabled")}else retornarAhome()}function retornarAhome(){location.href="index.html"}function activarEventosClickQuitarProd(){const t=document.querySelectorAll("td#delButton");t.length>0&&t.forEach((t=>{t.addEventListener("click",(()=>{let r=ShoppingCart.removeItem(t.dataset.codigo);ShoppingCart.saveShoppingCart(),mostrarMensaje(`${r[0].nombre} quitado del array.`,"alert"),cargarCarritoCompras()}))}))}cargarCarritoCompras(),btnComprar.addEventListener("click",(()=>{mostrarMensaje("ðŸ›ï¸ Compra finalizada. Muchas gracias por elegirnos!","success"),ShoppingCart.cartList.length=0,localStorage.removeItem("carrito"),setTimeout((()=>retornarAhome()),3500)})),btnVolver.addEventListener("click",(()=>retornarAhome()));